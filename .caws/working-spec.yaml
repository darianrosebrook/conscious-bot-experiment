id: FEAT-3071
title: "Executor dispatch by executable metadata + fallback planning hardening"
risk_tier: 2
scope:
  in:
    - "Executor dispatch uses meta.executable (authority no longer blocks)"
    - "Fallback planner emits multi-step dig_block plan for collect/mine"
    - "Non-blocking cognition posts in minecraft-interface event handlers"
    - "Timeout/backoff tuning for planningâ†”minecraft calls"
    - "Tests for executable dispatch + fallback plans"
  out:
    - "Full planner rewrite or legacy GOAP removal"
    - "Schema migrations"
invariants:
  - "Only steps with meta.executable === true are dispatched"
  - "Fallback steps use canonical leaf arg schema"
  - "Hot loops do not await telemetry/ack posts"
acceptance:
  - id: A1
    given: "task steps with meta.executable true but non-sterling authority"
    when: "executor runs"
    then: "steps dispatch successfully without authority gating"
  - id: A2
    given: "collect/mine requirement and Sterling returns []"
    when: "fallback planner runs"
    then: "produces multi-step dig_block plan with valid args"
  - id: A3
    given: "chat/environmental events"
    when: "cognition post fails or stalls"
    then: "bot loop remains responsive; errors logged"
non_functional:
  a11y: []
  perf:
    api_p95_ms: 250
  security:
    - "No new external inputs without validation"
contracts:
  - type: openapi
    path: "contracts/planning-executor.yaml#/components/schemas/ExecutableStep"
observability:
  logs:
    - "executor dispatch source/leaf"
    - "fallback plan chosen"
  metrics:
    - "executor_dispatch_count"
    - "fallback_plan_count"
  traces: []
migrations: []
rollback:
  - "Feature flag to restore authority gate"
